/**
 * The solution to tracking page views and events in a SPA with AngularJS
 * @version v0.4.0 - 2015-10-28
 * @link https://github.com/mgonto/angularytics
 * @author Martin Gontovnikas <martin@gonto.com.ar>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(){angular.module("angularytics",[]).provider("Angularytics",function(){var a=["Google"],b=[];this.setEventHandlers=function(b){angular.isString(b)&&(b=[b]),a=[],angular.forEach(b,function(b){a.push(c(b))})},this.setSuppressPages=function(a){angular.isArray(a)&&(b=[],angular.forEach(a,function(a){b.push(a)}))};var c=function(a){return a.charAt(0).toUpperCase()+a.substring(1)},d="$locationChangeSuccess";this.setPageChangeEvent=function(a){d=a};var e=!0;this.disablePageViewTracking=function(){e=!1},this.$get=["$injector","$rootScope","$location",function(c,f,g){var h=[];angular.forEach(a,function(a){h.push(c.get("Angularytics"+a+"Handler"))});var j=function(a){angular.forEach(h,function(b){a(b)})},k={};return k.init=function(){},k.trackEvent=function(a,b,c,d,e){j(function(f){a&&b&&f.trackEvent(a,b,c,d,e)})},k.trackPageView=function(a){j(function(b){a&&b.trackPageView(a)})},k.trackTiming=function(a,b,c,d){j(function(e){a&&b&&c&&e.trackTiming(a,b,c,d)})},e&&f.$on(d,function(){var a=g.url();for(i in b)if(new RegExp(b[i]).test(a))return;k.trackPageView(a)}),k}]})}(),function(){angular.module("angularytics").factory("AngularyticsConsoleHandler",["$log",function(a){var b={};return b.trackPageView=function(b){a.log("URL visited",b)},b.trackEvent=function(b,c,d,e,f){a.log("Event tracked",b,c,d,e,f)},b.trackTiming=function(b,c,d,e){a.log("Timing tracked",b,c,d,e)},b}])}(),function(){angular.module("angularytics").factory("AngularyticsGoogleHandler",function(){var a={};return a.trackPageView=function(a){_gaq.push(["_set","page",a]),_gaq.push(["_trackPageview",a])},a.trackEvent=function(a,b,c,d,e){_gaq.push(["_trackEvent",a,b,c,d,e])},a.trackTiming=function(a,b,c,d){_gaq.push(["_trackTiming",a,b,c,d])},a}).factory("AngularyticsGoogleUniversalHandler",function(){var a={};return a.trackPageView=function(a){ga("set","page",a),ga("send","pageview",a)},a.trackEvent=function(a,b,c,d,e){ga("send","event",a,b,c,d,{nonInteraction:e})},a.trackTiming=function(a,b,c,d){ga("send","timing",a,b,c,d)},a})}(),function(){angular.module("angularytics").filter("trackEvent",["Angularytics",function(a){return function(b,c,d,e,f,g){return a.trackEvent(c,d,e,f,g),b}}])}();